<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MASTER X | Login</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>body{background:#000;color:white;font-family:sans-serif;}</style>
</head>
<body class="flex flex-col justify-center items-center h-screen p-4">
    <h1 class="text-4xl font-black text-red-500 mb-10">MASTER X</h1>
    <input type="text" id="phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ" class="w-full p-4 mb-3 bg-zinc-900 rounded-xl">
    <input type="password" id="pass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" class="w-full p-4 mb-6 bg-zinc-900 rounded-xl">
    <button onclick="auth()" class="w-full bg-red-600 p-4 rounded-xl font-bold">Ø¯Ø®ÙˆÙ„ ðŸš€</button>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
        import { getDatabase, ref, get, set } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-database.js";
        
        const db = getDatabase(initializeApp({
            apiKey: "AIzaSyCd6mOpEJyiUSAAhmm2NbhT80MMY0UQJcc",
            databaseURL: "https://project-fe025bb5-b1cc-4b8f-93e-default-rtdb.firebaseio.com"
        }));

        window.auth = () => {
            const phone = document.getElementById('phone').value;
            const pass = document.getElementById('pass').value;
            if(!phone || !pass) return alert("Ø§Ù…Ù„Ø£ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª!");
            
            get(ref(db, 'ZEYKOR/users/' + phone)).then(snap => {
                if(snap.exists()) {
                    if(snap.val().banned === true) return alert("âŒ ØªÙ… Ø­Ø¸Ø± Ù‡Ø°Ø§ Ø§Ù„Ø­Ø³Ø§Ø¨ Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©!");
                    if(snap.val().password === pass) {
                        localStorage.setItem('zeykor_phone', phone);
                        window.location.href = "index.html";
                    } else {
                        alert("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø®Ø·Ø£!");
                    }
                } else {
                    // Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯
                    set(ref(db, 'ZEYKOR/users/' + phone), {
                        balance: 0,
                        password: pass,
                        nick: "Ù…Ø³ØªØ®Ø¯Ù…",
                        banned: false
                    }).then(() => {
                        localStorage.setItem('zeykor_phone', phone);
                        window.location.href = "index.html";
                    });
                }
            });
        };
    </script>
</body>
</html>
